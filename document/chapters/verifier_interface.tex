% TODO: \mnote{I'm not sure I like the name vnn\_verifier. Can we make it into a macro via latex \textbackslash{}newcommand so we can change it everywhere at once? As for the name, maybe just verifier or $<$executable$>$?}

\chapter{Solver Interface}
\label{sec:solver_interface}

This chapter specifies the command-line interface (CLI) for neural network verifiers compliant with the VNNLIB-2.0 standard. The goal is to provide a consistent and 
predictable interface for users and automated tools to interact with different verifiers. The CLI supports querying verifier capabilities, listing supported operations, 
and invoking the verification process with various configurations.

All verifiers adhering to this specification should be an executable invokable by the command line, referred to in this document as \texttt{verifier}. The general syntax for interacting with the verifier via the CLI is:
\begin{lstlisting}[style=bash, numbers=none, frame=none, backgroundcolor=\color{white}]
verifier [global-options] <command> [command-options] 
	[arguments] 
\end{lstlisting}

\section{Global Options}
These options are applicable to the main \texttt{verifier} executable.
\begin{itemize}
    \item \texttt{--name}: Print the verifier's full name. This can be different from the executable's name.
    \item \texttt{--version}: Print the verifier's version string.
\end{itemize}

\section{Commands}

\subsection{\texttt{verify}}
\begin{itemize}
    \item \textbf{Description}: Invokes the verification process on a given neural network model and a VNNLIB property specification.

    \item \textbf{Usage}:
    \begin{lstlisting}[style=bash]
verifier verify <query_filepath> 
--network <name1>:<net1_path> 
[--network <name2>:<net2_path> ...] 
[--timeout <seconds>]
    \end{lstlisting}

    \item \textbf{Options}:
    \begin{longtable}{@{}>{\raggedright\arraybackslash\ttfamily}p{0.15\textwidth}   % Option column
                    >{\raggedright\arraybackslash\ttfamily}p{0.12\textwidth}        % Shorthand column
                    >{\raggedright\arraybackslash\ttfamily}p{0.20\textwidth}        % Argument column
                    >{\raggedright\arraybackslash}p{0.4\textwidth}@{}}              % Description column (normal font for readability)
        \toprule
        Option & Shorthand & Argument & Description \\
        \midrule
        \bottomrule
        \texttt{--network} & \texttt{-n} & \texttt{<name>:<path>} & \textbf{(Required)} Identifier for the network and path to the ONNX model file. \\
        \texttt{--timeout} & \texttt{-t} & \texttt{<seconds>} & Maximum time to spend on verification in integer seconds. \\
    \end{longtable}
    
    \item \textbf{Standard Output/Error}:
    \begin{itemize}
        \item The primary result is printed to \texttt{stdout}: \texttt{SAT}, \texttt{UNSAT}, \texttt{TIMEOUT}, \texttt{UNKNOWN}.
        \item If \texttt{SAT}, the generated satisfying assignment will be printed to \texttt{stdout} immediately following the result line. 
        The format of the satisfying assignment is detailed in Section~\ref{sec:satisfying_assignments}.
        \item Detailed logs, warnings, or error messages should be sent to \texttt{stderr}.
    \end{itemize}
\end{itemize}

The \texttt{<name>} in the \texttt{--network} option is a user-defined identifier for the network, which is used in the VNNLIB property file to refer to this specific network.

\section{Global Capability Options}

This section details additional global options for querying individual verifier capabilities. These options provide a convenient way for higher-level tools to automatically assess the capabilities of the verifier.

\subsection{\texttt{supports-multiple-networks}}
\begin{itemize}
    \item \textbf{Description}: Checks if the verifier supports properties defined over multiple neural networks. See Section~\ref{sec:multi-network-declarations} for details on how to declare and use multiple networks in VNNLIB.
    \item \textbf{Usage}: \texttt{verifier --supports-multiple-networks}
    \item \textbf{Output}: \texttt{true} or \texttt{false}.
\end{itemize}

\subsection{\texttt{supports-multiple-io}}
\begin{itemize}
    \item \textbf{Description}: Checks if the verifier supports models with multiple input and/or output tensors. See Section~\ref{sec:input-output-declarations} for details on how to declare and use multiple I/O tensors in VNNLIB.
    \item \textbf{Usage}: \texttt{verifier --supports-multiple-io}
    \item \textbf{Output}: \texttt{true} or \texttt{false}.
\end{itemize}

\subsection{\texttt{supports-hidden-nodes}}
\begin{itemize}
    \item \textbf{Description}: Checks if the verifier supports referencing hidden layer nodes in VNNLIB properties. See Section~\ref{sec:hidden-node-declarations} for details on how to declare and use hidden nodes in VNNLIB.
    \item \textbf{Usage}: \texttt{verifier --supports-hidden-nodes}
    \item \textbf{Output}: \texttt{true} or \texttt{false}.
\end{itemize}

\subsection{\texttt{supported-logics}}
\begin{itemize}
    \item \textbf{Description}: Prints a list of supported VNN-LIB logics, indicating the scope of theoretical support. See Section~\ref{sec:query_categories} for 
    details on each of the logics (e.g., NRA for non-linear real arithmetic support) that may be represented in VNN-LIB.
    \item \textbf{Example Output}:
    \begin{lstlisting}[style=bash, numbers=none, frame=none, backgroundcolor=\color{white}]
BR
ARCH_FRA
FRA_BOX
...
    \end{lstlisting}
\end{itemize}

\subsection{\texttt{supported-theories}}
\begin{itemize}
    \item \textbf{Description}: Prints a newline-separated list of the ONNX data types (e.g., ``float16'', ``float32'', ``int32'') that the verifier supports.
    \item \textbf{Usage}: \texttt{verifier --supported-theories}
    \item \textbf{Example Output}:
    \begin{lstlisting}[style=bash, numbers=none, frame=none, backgroundcolor=\color{white}]
float16
float32
...
    \end{lstlisting}
\end{itemize}

\subsection{\texttt{supported-onnx-operators}}
\begin{itemize}
    \item \textbf{Shorthand}: \texttt{so}
    \item \textbf{Description}: Prints a newline-separated list of ONNX operator types (e.g., ``Conv'', ``Relu'', ``Gemm'') that are supported by the verifier. 
	This helps users determine if their ONNX model is compatible with the verifier. See Section~\ref{sec:model} for more details on the ONNX standard and its operators.
    \item \textbf{Usage}: \texttt{verifier --supported-onnx-operators}
    \item \textbf{Example Output}:
    \begin{lstlisting}[style=bash, numbers=none, frame=none, backgroundcolor=\color{white}]
Conv
Relu
MatMul
Gemm
Add
Flatten
...
    \end{lstlisting}
\end{itemize}

\subsection{\texttt{supported-onnx-opsets}}
\begin{itemize}
    \item \textbf{Description}: Prints a newline-separated list of supported ONNX opset versions.
    \item \textbf{Usage}: \texttt{verifier --supported-onnx-opsets}
    \item \textbf{Example Output}:
    \begin{lstlisting}[style=bash, numbers=none, frame=none, backgroundcolor=\color{white}]
13
14
15
    \end{lstlisting}
\end{itemize}

\section{Satisfying Assignments}\label{sec:satisfying_assignments}
